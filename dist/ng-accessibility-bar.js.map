{"version":3,"sources":["ng-accessibility-bar.module.js","ng-accessibility-bar.component.js","ng-accessibility-bar.templates.js"],"names":["angular","module","AccessibilityBar","templateUrl","controller","AccessibilityBarComponentController","controllerAs","bindings","contrast","contrastClass","fontAdjust","fontAdjustMaxSize","fontAdjustMinSize","fontAdjustIncrementRate","libras","showTitle","title","onInit","_setDefaultValues","_verifyContrast","vm","config","class","visibility","incrementRate","maxSize","minSize","value","_toggleClass","element","classe","$element","document","querySelector","classList","contains","remove","add","_switchClass","oldClass","newClass","localStorage","getItem","setContrast","_getDefaultWindowFontSize","fontSize","window","getComputedStyle","documentElement","getPropertyValue","replace","_adjustFontSize","operator","isInFontSizeLimit","$html","prefixFontClassName","currentFontClassName","defaultFontSize","setAttribute","increaseFontSize","decreaseFontSize","$body","setItem","this","$onInit","component","run","$templateCache","put"],"mappings":"CAAA,WACA,YAEAA,SACAC,OAAA,8BCJA,WACA,YAKA,SAAAC,KACA,OACAC,YAAA,qCACAC,WAAAC,EACAC,aAAA,KACAC,UACAC,SAAA,IACAC,cAAA,IACAC,WAAA,IACAC,kBAAA,IACAC,kBAAA,IACAC,wBAAA,IACAC,OAAA,IACAC,UAAA,IACAC,MAAA,MAMA,QAAAX,KAWA,QAAAY,KACAC,IACAC,EAAAC,EAAAC,QAGA,QAAAH,KACAE,EAAAC,QACAb,UACAc,QAAAF,EAAAX,eAAA,iBACAc,WAAAH,EAAAZ,YAAA,GAEAE,YACAc,cAAAJ,EAAAP,yBAAA,EACAY,QAAAL,EAAAT,mBAAA,GACAe,QAAAN,EAAAR,mBAAA,GACAW,WAAAH,EAAAV,cAAA,GAEAI,QACAS,WAAAH,EAAAN,UAAA,GAEAE,OACAW,MAAAP,EAAAJ,OAAA,kBACAO,WAAAH,EAAAL,aAAA,IAKA,QAAAa,GAAAC,EAAAC,GACA,GAAAC,GAAAC,SAAAC,cAAAJ,EAEAE,GAAAG,UAAAC,SAAAL,GACAC,EAAAG,UAAAE,OAAAN,GAEAC,EAAAG,UAAAG,IAAAP,GAIA,QAAAQ,GAAAT,EAAAU,EAAAC,GACA,GAAAT,GAAAC,SAAAC,cAAAJ,EAEAE,GAAAG,UAAAC,SAAAI,IACAR,EAAAG,UAAAE,OAAAG,GAGAR,EAAAG,UAAAG,IAAAG,GAGA,QAAArB,GAAAE,GACA,SAAAoB,aAAAC,QAAA,2BAAArB,EAAAb,SAAAe,YACAoB,EAAAtB,GAIA,QAAAuB,KACA,GAAAC,GAAAC,OAAAC,iBAAAf,SAAAgB,iBAAAC,iBAAA,YAIA,OAHAJ,GAAAA,EAAAK,QAAA,MAAA,IACAL,GAAAA,EAKA,QAAAM,GAAAC,GACA,GAGAC,GAHAC,EAAAtB,SAAAC,cAAA,QACAsB,EAAA,sBACAC,EAAAD,EAAAE,CAIAJ,GADA,MAAAD,EACAK,EAAArC,EAAAC,OAAAX,WAAAgB,QAEA+B,EAAArC,EAAAC,OAAAX,WAAAe,QAGA4B,IACA,MAAAD,EACAK,GAAArC,EAAAC,OAAAX,WAAAc,cAEAiC,GAAArC,EAAAC,OAAAX,WAAAc,cAGA8B,EAAAI,aAAA,QAAA,cAAAD,EAAA,OACAnB,EAAA,OAAAkB,EAAAD,EAAAE,IAIA,QAAAE,KACAR,EAAA,KAGA,QAAAS,KACAT,EAAA,KAGA,QAAAR,GAAAtB,GACA,GAAAwC,GAAA7B,SAAAC,cAAA,OAEAL,GAAA,OAAAP,EAAAb,SAAAa,UAEAoB,aAAAqB,QAAA,yBAAAD,EAAA3B,UAAAC,SAAAd,EAAAb,SAAAa,WA5GA,GAAAD,GAAA2C,KACAN,EAAAb,GAEAxB,GAAAC,UAEAD,EAAA4C,QAAA/C,EACAG,EAAAwC,iBAAAA,EACAxC,EAAAuC,iBAAAA,EACAvC,EAAAuB,YAAAA,EAhCA3C,QAAAC,OAAA,wBACAgE,UAAA,qBAAA/D,QCJAF,QAAAC,OAAA,wBAAAiE,KAAA,iBAAA,SAAAC,GAAAA,EAAAC,IAAA,qCAAA","file":"ng-accessibility-bar.js","sourcesContent":["(function() {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('ng-accessibility-bar', []);\r\n}());\r\n","(function() {\r\n    'use strict';\r\n\r\n    angular.module('ng-accessibility-bar')\r\n        .component('ngAccessibilityBar', AccessibilityBar());\r\n\r\n    function AccessibilityBar() {\r\n        return {\r\n            templateUrl: 'ng-accessibility-bar.template.html',\r\n            controller: AccessibilityBarComponentController,\r\n            controllerAs: 'vm',\r\n            bindings:{\r\n                contrast: '<',\r\n                contrastClass: '@',\r\n                fontAdjust: '<',\r\n                fontAdjustMaxSize: '<',\r\n                fontAdjustMinSize: '<',\r\n                fontAdjustIncrementRate: '<',\r\n                libras: '<',\r\n                showTitle: '<',\r\n                title: '@',\r\n            }\r\n        };\r\n    }\r\n\r\n    /* @ngInject */\r\n    function AccessibilityBarComponentController() {\r\n        var vm = this,\r\n            defaultFontSize = _getDefaultWindowFontSize();\r\n\r\n        vm.config = {};\r\n\r\n        vm.$onInit = onInit;\r\n        vm.decreaseFontSize = decreaseFontSize;\r\n        vm.increaseFontSize = increaseFontSize;\r\n        vm.setContrast = setContrast;\r\n\r\n        function onInit() {\r\n            _setDefaultValues();\r\n            _verifyContrast(vm.config);\r\n        }\r\n\r\n        function _setDefaultValues() {\r\n            vm.config = {\r\n                contrast: {\r\n                    class: vm.contrastClass || 'color-inverter',\r\n                    visibility: vm.contrast !== false\r\n                },\r\n                fontAdjust: {\r\n                    incrementRate: vm.fontAdjustIncrementRate || 2,\r\n                    maxSize: vm.fontAdjustMaxSize || 20,\r\n                    minSize: vm.fontAdjustMinSize || 16,\r\n                    visibility: vm.fontAdjust !== false\r\n                },\r\n                libras: {\r\n                    visibility: vm.libras !== false\r\n                },\r\n                title: {\r\n                    value: vm.title || 'Acessibilidade:',\r\n                    visibility: vm.showTitle !== false\r\n                }\r\n            };\r\n        }\r\n\r\n        function _toggleClass(element, classe) {\r\n            var $element = document.querySelector(element);\r\n\r\n            if ($element.classList.contains(classe)) {\r\n                $element.classList.remove(classe);\r\n            } else {\r\n                $element.classList.add(classe);\r\n            }\r\n        }\r\n\r\n        function _switchClass(element, oldClass, newClass) {\r\n            var $element = document.querySelector(element);\r\n\r\n            if ($element.classList.contains(oldClass)) {\r\n                $element.classList.remove(oldClass);\r\n            }\r\n\r\n            $element.classList.add(newClass);\r\n        }\r\n\r\n        function _verifyContrast(config) {\r\n            if (localStorage.getItem('accessibility-contrast') === 'true' && config.contrast.visibility) {\r\n                setContrast(config);\r\n            }\r\n        }\r\n\r\n        function _getDefaultWindowFontSize() {\r\n            var fontSize = window.getComputedStyle(document.documentElement).getPropertyValue('font-size');\r\n            fontSize = fontSize.replace(/\\D/g, '');\r\n            fontSize = +fontSize;\r\n\r\n            return fontSize;\r\n        }\r\n\r\n        function _adjustFontSize(operator) {\r\n            var $html = document.querySelector('html'),\r\n                prefixFontClassName = 'accessibility-font-',\r\n                currentFontClassName = prefixFontClassName + defaultFontSize,\r\n                isInFontSizeLimit;\r\n\r\n            if (operator === '-') {\r\n                isInFontSizeLimit = defaultFontSize > vm.config.fontAdjust.minSize;\r\n            } else {\r\n                isInFontSizeLimit = defaultFontSize < vm.config.fontAdjust.maxSize;\r\n            }\r\n\r\n            if (isInFontSizeLimit) {\r\n                if (operator === '+') {\r\n                    defaultFontSize += vm.config.fontAdjust.incrementRate;\r\n                } else {\r\n                    defaultFontSize -= vm.config.fontAdjust.incrementRate;\r\n                }\r\n\r\n                $html.setAttribute('style', 'font-size: ' + defaultFontSize + 'px;');\r\n                _switchClass('body', currentFontClassName, prefixFontClassName + defaultFontSize);\r\n            }\r\n        }\r\n\r\n        function increaseFontSize() {\r\n            _adjustFontSize('+');\r\n        }\r\n\r\n        function decreaseFontSize() {\r\n            _adjustFontSize('-');\r\n        }\r\n\r\n        function setContrast(config) {\r\n            var $body = document.querySelector('body');\r\n\r\n            _toggleClass('body', config.contrast.class);\r\n\r\n            localStorage.setItem('accessibility-contrast', $body.classList.contains(config.contrast.class));\r\n        }\r\n    }\r\n})();\r\n","angular.module('ng-accessibility-bar').run(['$templateCache', function($templateCache) {$templateCache.put('ng-accessibility-bar.template.html','<svg style=\"position:absolute;width:0;height:0;overflow:hidden\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\"><defs><symbol id=\"icon-hand\" viewBox=\"0 0 32 32\"><title>hand</title><path d=\"M28.593 6.769c0 1.020-0.827 1.846-1.846 1.846s-1.846-0.827-1.846-1.846c0-1.020 0.827-1.846 1.846-1.846s1.846 0.827 1.846 1.846z\"></path><path d=\"M23.67 3.077c0 1.020-0.827 1.846-1.846 1.846s-1.846-0.827-1.846-1.846c0-1.020 0.827-1.846 1.846-1.846s1.846 0.827 1.846 1.846z\"></path><path d=\"M18.747 1.846c0 1.020-0.827 1.846-1.846 1.846s-1.846-0.827-1.846-1.846c0-1.020 0.827-1.846 1.846-1.846s1.846 0.827 1.846 1.846z\"></path><path d=\"M13.824 4.308c0 1.020-0.827 1.846-1.846 1.846s-1.846-0.827-1.846-1.846c0-1.020 0.827-1.846 1.846-1.846s1.846 0.827 1.846 1.846z\"></path><path d=\"M24.901 6.769v8c0 0.34-0.276 0.615-0.615 0.615s-0.615-0.276-0.615-0.615v-11.692h-3.692v10.462c0 0.34-0.276 0.615-0.615 0.615s-0.615-0.276-0.615-0.615v-11.692h-3.692v11.692c0 0.34-0.276 0.615-0.615 0.615s-0.615-0.276-0.615-0.615v-9.231h-3.692v15.385l-2.492-3.41c-0.738-1.138-2.18-1.52-3.236-0.868-1.052 0.667-1.313 2.122-0.585 3.257 0 0 4.020 6.084 5.733 8.688s4.489 4.641 9.679 4.641c8.593 0 9.362-6.636 9.362-8.615s0-16.615 0-16.615h-3.692z\"></path></symbol><symbol id=\"icon-contrast\" viewBox=\"0 0 32 32\"><title>contrast</title><path d=\"M16 0c-8.837 0-16 7.163-16 16s7.163 16 16 16 16-7.163 16-16-7.163-16-16-16zM4 16c0-6.627 5.373-12 12-12v24c-6.627 0-12-5.373-12-12z\"></path></symbol></defs></svg><div class=\"accessibility-bar-wrapper\"><span class=\"text\" ng-if=\"vm.config.title.visibility\">{{ vm.config.title.value }}</span><div class=\"list\"><div class=\"item\" ng-if=\"vm.config.fontAdjust.visibility\"><button class=\"action\" type=\"button\" ng-click=\"vm.decreaseFontSize()\" ng-keypress=\"vm.decreaseFontSize()\">A-</button></div><div class=\"item\" ng-if=\"vm.config.fontAdjust.visibility\"><button class=\"action\" type=\"button\" ng-click=\"vm.increaseFontSize()\" ng-keypress=\"vm.increaseFontSize()\">A+</button></div><div class=\"item\" ng-if=\"vm.config.contrast.visibility\"><button class=\"action\" type=\"button\" ng-click=\"vm.setContrast(vm.config)\" ng-keypress=\"vm.setContrast(vm.config)\"><svg class=\"icon\"><use xlink:href=\"#icon-contrast\"></use></svg></button></div><div class=\"item\" ng-if=\"vm.config.libras.visibility\"><a class=\"link\" target=\"_blank\" href=\"http://www.vlibras.gov.br/\"><svg class=\"icon\"><use xlink:href=\"#icon-hand\"></use></svg></a></div></div></div>');}]);"]}